"use strict";function getRandomInt(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}window.onload=function(){function e(e,t,a,o){var r=this;r.configureChart(e,t,a,o),r.init()}var t=[{label:"一月",value:getRandomInt(0,400)},{label:"二月",value:getRandomInt(1,400)},{label:"三月",value:getRandomInt(1,400)},{label:"四月",value:getRandomInt(0,400)},{label:"五月",value:getRandomInt(1,400)}];e.prototype.configureChart=function(e,t,a,o){var r=this;r.setCanvasParameters(e,t,a,o),r.setChartParameters(e,t,a,o)},e.prototype.setCanvasParameters=function(e,t,a,o){var r=this;r.id=e,r.cw=t,r.ch=a,r.data=o},e.prototype.setChartParameters=function(e,t,a,o){var r=this;r.axeRadio=10,r.horGap=r.cw*r.axeRadio/100,r.verGap=r.ch*r.axeRadio/100,r.fontRadio=3,r.horFontSize=r.cw*r.fontRadio/100,r.verFontSize=r.ch*r.fontRadio/100},e.prototype.init=function(){var e=this;e.createCanvas(),e.handleData(),e.prepareData(),e.draw()},e.prototype.createCanvas=function(){var e=this,t=document.createElement("canvas");t.id=e.id+"-"+Math.random(),t.width=e.cw,t.height=e.ch,document.getElementById(e.id).innerHTML="",document.getElementById(e.id).appendChild(t),e.canvas=t,e.context=e.canvas.getContext("2d")},e.prototype.handleData=function(){var e=this;e.label=[],e.values=[],e.data.forEach(function(t){e.label.push(t.label),e.values.push(t.value)})},e.prototype.prepareData=function(){var e=this;e.itemNum=e.data.length,e.MaxValue=Math.max.apply(null,e.values),e.MinValue=Math.min.apply(null,e.values),e.horAxiWidth=e.cw-2*e.horGap,e.verAxiWidth=e.ch-2*e.verGap,e.verBound=10*Math.ceil(e.MaxValue/10),e.verFeq=e.verBound/e.itemNum,e.horFeq=e.horAxiWidth/e.itemNum},e.prototype.draw=function(){var e=this;e.drawX(),e.drawY(),e.drawYLabel(),e.drawXLabel(),e.HorGuideLines(),e.verGuideLines(),e.drawBars()},e.prototype.drawX=function(){var e=this,t=e.context;t.beginPath(),t.moveTo(e.horGap,e.ch-e.verGap),t.lineTo(e.cw-e.horGap,e.ch-e.verGap),t.lineWidth=2,t.stroke()},e.prototype.drawY=function(){var e=this,t=e.context;t.beginPath(),t.moveTo(e.horGap,e.ch-e.verGap),t.lineTo(e.horGap,e.verGap),t.lineWidth=2,t.stroke()},e.prototype.drawYLabel=function(){for(var t=this,a=t.context,o=0;o<=t.itemNum;o++){var r=t.verBound-o*t.verFeq,n=t.horGap-t.horGap/t.axeRadio,i=t.verAxiWidth/t.verBound*t.verFeq,h=t.verGap+o*i;a.textAlign="right",a.fillText(r,n,h)}e.prototype.drawXLabel=function(){for(var e=this,t=e.context,a=0;a<e.itemNum;a++){var o=e.label[a],r=e.horGap+a*e.horFeq+e.horFeq/2,n=e.ch-e.verGap+e.verGap/e.axeRadio;t.textAlign="center",t.textBaseline="top",t.fillText(o,r,n)}}},e.prototype.drawY=function(){var e=this,t=e.context;t.moveTo(e.horGap,e.ch-e.verGap),t.lineTo(e.horGap,e.verGap),t.lineWidth=2,t.stroke()},e.prototype.HorGuideLines=function(){var e=this,t=e.context;t.strokeStyle="#eeeeee",t.lineWidth=1;for(var a=0;a<e.itemNum;a++){t.beginPath();var o=e.verAxiWidth/e.verBound*e.verFeq,r=e.horGap,n=e.verGap+a*o,i=e.cw-e.horGap,h=e.verGap+a*o;t.moveTo(r,n),t.lineTo(i,h),t.stroke()}},e.prototype.verGuideLines=function(){var e=this,t=e.context;t.strokeStyle="#eeeeee",t.lineWidth=1;for(var a=0;a<=e.itemNum;a++){t.beginPath();var o=e.horGap+a*e.horFeq,r=e.ch-e.verGap,n=e.horGap+a*e.horFeq,i=e.verGap;t.moveTo(o,r),t.lineTo(n,i),t.stroke()}},e.prototype.drawBars=function(){for(var e=this,t=0;t<e.itemNum;t++){var a=e.rndColor(),o="rgba("+a.r+", "+a.g+", "+a.b+", 0.3)",r="rgba("+a.r+", "+a.g+", "+a.b+")";e.context.beginPath();var n=e.horGap+t*e.horFeq+e.horFeq/e.axeRadio,i=e.ch-e.verGap,h=e.horFeq-2*e.horFeq/e.axeRadio,l=-e.verAxiWidth*e.values[t]/e.MaxValue;console.log(e.MaxValue),e.context.fillStyle=o,e.context.strokeStyle=r,e.context.rect(n,i,h,l),e.context.stroke(),e.context.fill()}},e.prototype.rndColor=function(){return{r:getRandomInt(0,257),g:getRandomInt(0,257),b:getRandomInt(0,257)}};new e("div1",600,450,t)};
